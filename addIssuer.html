<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Issuer</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        body {
            background-image: linear-gradient(45deg, rgb(248, 199, 207), rgb(148, 222, 222));
        }

        .form-container {
            max-width: 700px;
            margin: 18px auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            padding: 30px 40px;
        }

        .form-title {
            font-weight: 700;
            color: #0dcaf0;
            margin-bottom: 25px;
        }

        .btn-cancel {
            border-color: #6c757d;
            color: #6c757d;
        }

        .btn-cancel:hover {
            background-color: #6c757d;
            color: white;
        }

        @media (max-width: 767px) {
            .form-container {
                padding: 25px;
            }
        }
    </style>
</head>

<body>

    <!-- Navbar placeholder -->
    <div id="navbar-placeholder"></div>

    <!-- Main form -->
    <div class="container">
        <div class="form-container">
            <h3 class="form-title text-center mb-4"><i class="fa-solid fa-user-plus me-2"></i>Add Issuer</h3>

            <form id="addIssuerForm">
                <div class="row g-3">
                    <!-- Organization Name -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Organization Name</label>
                        <input type="text" class="form-control" placeholder="Enter organization name" required>
                    </div>
                    <!-- Location -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Location</label>
                        <input type="text" class="form-control" placeholder="Enter location" required>
                    </div>

                    <!-- Contact First Name -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Contact First Name</label>
                        <input type="text" class="form-control" placeholder="Enter first name" required>
                    </div>
                    <!-- Contact Last Name -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Contact Last Name</label>
                        <input type="text" class="form-control" placeholder="Enter last name" required>
                    </div>

                    <!-- Primary Email -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Contact Primary Email (Admin #1)</label>
                        <input type="email" class="form-control" placeholder="Enter primary email" required>
                    </div>
                    <!-- Secondary Email -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Contact Secondary Email (Admin #2)</label>
                        <input type="email" class="form-control" placeholder="Enter secondary email">
                    </div>

                    <!-- Primary Phone -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Contact Primary Phone</label>
                        <input type="tel" class="form-control" placeholder="Enter primary phone" required>
                    </div>
                    <!-- Secondary Phone -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Contact Secondary Phone</label>
                        <input type="tel" class="form-control" placeholder="Enter secondary phone">
                    </div>

                    <!-- Postal Address -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Postal Address</label>
                        <input type="text" class="form-control" placeholder="Enter postal address" required>
                    </div>
                    <!-- Website -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Website</label>
                        <input type="url" class="form-control" placeholder="Enter website URL">
                    </div>
                </div>

                <!-- Buttons -->
                <div class="d-flex justify-content-end mt-4">
                    <button type="button" class="btn btn-cancel me-3 fw-semibold"
                        onclick="window.location.href='adminHome.html'">
                        <i class="fa-solid fa-xmark me-1"></i> Cancel
                    </button>
                    <button type="submit" class="btn btn-info text-white fw-semibold">
                        <i class="fa-solid fa-paper-plane me-1"></i> Submit
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Import navbar dynamically -->
    <script>
        fetch('navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-placeholder').innerHTML = data;
            })
            .catch(err => console.error('Navbar load failed:', err));
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("addIssuerForm");

            form.addEventListener("submit", (e) => {
                e.preventDefault();

                // Collect all form values
                const formData = {
                    organizationName: form.querySelector('[placeholder="Enter organization name"]').value.trim(),
                    location: form.querySelector('[placeholder="Enter location"]').value.trim(),
                    contactFirstName: form.querySelector('[placeholder="Enter first name"]').value.trim(),
                    contactLastName: form.querySelector('[placeholder="Enter last name"]').value.trim(),
                    primaryEmail: form.querySelector('[placeholder="Enter primary email"]').value.trim(),
                    secondaryEmail: form.querySelector('[placeholder="Enter secondary email"]').value.trim(),
                    primaryPhone: form.querySelector('[placeholder="Enter primary phone"]').value.trim(),
                    secondaryPhone: form.querySelector('[placeholder="Enter secondary phone"]').value.trim(),
                    postalAddress: form.querySelector('[placeholder="Enter postal address"]').value.trim(),
                    website: form.querySelector('[placeholder="Enter website URL"]').value.trim(),
                    createdAt: new Date().toLocaleString()
                };

                // Retrieve existing issuers from localStorage
                const issuers = JSON.parse(localStorage.getItem("issuers")) || [];

                // Add new one
                issuers.push(formData);

                // Save back to localStorage
                localStorage.setItem("issuers", JSON.stringify(issuers));

                alert("Issuer added successfully!");

                // Optionally redirect to issuer list page
                window.location.href = "issuerList.html";
            });
        });
    </script>

    <!-- Footer -->
    <script>
        fetch('footer.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
                document.body.classList.add('page-loaded'); // âœ… ensures footer styling applies after load
            })
            .catch(err => console.error('Footer load failed:', err));
    </script>

</body>

</html>